{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 95, "column": 0}, "map": {"version":3,"sources":["file:///Users/harryyang/hw-6-auth-and-deploy-harry-yangmath/database/schema/auth.ts"],"sourcesContent":["import { pgTable, text, integer, timestamp, boolean } from \"drizzle-orm/pg-core\";\n\t\t\t\nexport const users = pgTable(\"users\", {\n\t\t\t\t\tid: text(\"id\").primaryKey(),\n\t\t\t\t\tname: text('name').notNull(),\n email: text('email').notNull().unique(),\n emailVerified: boolean('email_verified').notNull(),\n image: text('image'),\n createdAt: timestamp('created_at').notNull(),\n updatedAt: timestamp('updated_at').notNull()\n\t\t\t\t});\n\nexport const sessions = pgTable(\"sessions\", {\n\t\t\t\t\tid: text(\"id\").primaryKey(),\n\t\t\t\t\texpiresAt: timestamp('expires_at').notNull(),\n token: text('token').notNull().unique(),\n createdAt: timestamp('created_at').notNull(),\n updatedAt: timestamp('updated_at').notNull(),\n ipAddress: text('ip_address'),\n userAgent: text('user_agent'),\n userId: text('user_id').notNull().references(()=> users.id, { onDelete: 'cascade' })\n\t\t\t\t});\n\nexport const accounts = pgTable(\"accounts\", {\n\t\t\t\t\tid: text(\"id\").primaryKey(),\n\t\t\t\t\taccountId: text('account_id').notNull(),\n providerId: text('provider_id').notNull(),\n userId: text('user_id').notNull().references(()=> users.id, { onDelete: 'cascade' }),\n accessToken: text('access_token'),\n refreshToken: text('refresh_token'),\n idToken: text('id_token'),\n accessTokenExpiresAt: timestamp('access_token_expires_at'),\n refreshTokenExpiresAt: timestamp('refresh_token_expires_at'),\n scope: text('scope'),\n password: text('password'),\n createdAt: timestamp('created_at').notNull(),\n updatedAt: timestamp('updated_at').notNull()\n\t\t\t\t});\n\nexport const verifications = pgTable(\"verifications\", {\n\t\t\t\t\tid: text(\"id\").primaryKey(),\n\t\t\t\t\tidentifier: text('identifier').notNull(),\n value: text('value').notNull(),\n expiresAt: timestamp('expires_at').notNull(),\n createdAt: timestamp('created_at'),\n updatedAt: timestamp('updated_at')\n\t\t\t\t});\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 158, "column": 0}, "map": {"version":3,"sources":["file:///Users/harryyang/hw-6-auth-and-deploy-harry-yangmath/database/schema/todos.ts"],"sourcesContent":["import { boolean, pgTable, text, timestamp, uuid } from \"drizzle-orm/pg-core\"\n\nimport { users } from \"./auth\"\nimport { relations } from \"drizzle-orm\"\nimport { createSelectSchema, createInsertSchema } from \"drizzle-zod\"\nimport { z } from \"zod\"\n\n\nexport const todos = pgTable(\"todos\", {\n    id: uuid(\"id\").primaryKey().defaultRandom(),\n    title: text(\"title\").notNull(),\n    completed: boolean(\"completed\").notNull().default(false),\n    createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n    updatedAt: timestamp(\"updated_at\").notNull().defaultNow(),\n    userId: text(\"user_id\")\n        .notNull()\n        .references(() => users.id, { onDelete: \"cascade\" })\n})\n\nexport const usersRelations = relations(users, ({ many }) => ({\n    todos: many(todos),\n}))\n\nexport const todosRelations = relations(todos, ({ one }) => ({\n    user: one(users, {\n        fields: [todos.userId],\n        references: [users.id],\n    }),\n}))\n\n\nexport const selectUserSchema = createSelectSchema(users);\nexport type User = z.infer<typeof selectUserSchema>;\n\nexport const selectTodoSchema = createSelectSchema(todos);\nexport type Todo = z.infer<typeof selectTodoSchema>;\n\nexport const insertTodoSchema = createInsertSchema(todos, {\n  title: (schema: z.ZodString) => schema.nonempty(\"Title cannot be empty\"),\n})\nexport type NewTodo = z.infer<typeof insertTodoSchema>;\n\nexport default {\n  users,\n  todos\n};"],"names":[],"mappings":";;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;;;;;AAIO,MAAM,QAAQ,CAAA,GAAA,qJAAA,CAAA,UAAO,AAAD,EAAE,SAAS;IAClC,IAAI,CAAA,GAAA,+JAAA,CAAA,OAAI,AAAD,EAAE,MAAM,UAAU,GAAG,aAAa;IACzC,OAAO,CAAA,GAAA,+JAAA,CAAA,OAAI,AAAD,EAAE,SAAS,OAAO;IAC5B,WAAW,CAAA,GAAA,kKAAA,CAAA,UAAO,AAAD,EAAE,aAAa,OAAO,GAAG,OAAO,CAAC;IAClD,WAAW,CAAA,GAAA,oKAAA,CAAA,YAAS,AAAD,EAAE,cAAc,OAAO,GAAG,UAAU;IACvD,WAAW,CAAA,GAAA,oKAAA,CAAA,YAAS,AAAD,EAAE,cAAc,OAAO,GAAG,UAAU;IACvD,QAAQ,CAAA,GAAA,+JAAA,CAAA,OAAI,AAAD,EAAE,WACR,OAAO,GACP,UAAU,CAAC,IAAM,0HAAA,CAAA,QAAK,CAAC,EAAE,EAAE;QAAE,UAAU;IAAU;AAC1D;AAEO,MAAM,iBAAiB,CAAA,GAAA,2IAAA,CAAA,YAAS,AAAD,EAAE,0HAAA,CAAA,QAAK,EAAE,CAAC,EAAE,IAAI,EAAE,GAAK,CAAC;QAC1D,OAAO,KAAK;IAChB,CAAC;AAEM,MAAM,iBAAiB,CAAA,GAAA,2IAAA,CAAA,YAAS,AAAD,EAAE,OAAO,CAAC,EAAE,GAAG,EAAE,GAAK,CAAC;QACzD,MAAM,IAAI,0HAAA,CAAA,QAAK,EAAE;YACb,QAAQ;gBAAC,MAAM,MAAM;aAAC;YACtB,YAAY;gBAAC,0HAAA,CAAA,QAAK,CAAC,EAAE;aAAC;QAC1B;IACJ,CAAC;AAGM,MAAM,mBAAmB,CAAA,GAAA,wIAAA,CAAA,qBAAkB,AAAD,EAAE,0HAAA,CAAA,QAAK;AAGjD,MAAM,mBAAmB,CAAA,GAAA,wIAAA,CAAA,qBAAkB,AAAD,EAAE;AAG5C,MAAM,mBAAmB,CAAA,GAAA,wIAAA,CAAA,qBAAkB,AAAD,EAAE,OAAO;IACxD,OAAO,CAAC,SAAwB,OAAO,QAAQ,CAAC;AAClD;uCAGe;IACb,OAAA,0HAAA,CAAA,QAAK;IACL;AACF","debugId":null}},
    {"offset": {"line": 217, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 277, "column": 0}, "map": {"version":3,"sources":["file:///Users/harryyang/hw-6-auth-and-deploy-harry-yangmath/database/db.ts"],"sourcesContent":["import \"dotenv/config\"\n\nimport { neonConfig, Pool } from '@neondatabase/serverless';\nimport { drizzle } from 'drizzle-orm/neon-serverless';\nimport { WebSocket } from 'ws';\n\nimport * as schema from './schema';\n\nconst connectionString =\n  process.env.NODE_ENV === 'production' ? process.env.DATABASE_URL : process.env.LOCAL_DATABASE_URL;\n\nif (process.env.NODE_ENV === 'production') {\n  neonConfig.webSocketConstructor = WebSocket;\n  neonConfig.poolQueryViaFetch = true;\n} else {\n  neonConfig.wsProxy = (host) => `${host}:5433/v1`;\n  neonConfig.useSecureWebSocket = false;\n  neonConfig.pipelineTLS = false;\n  neonConfig.pipelineConnect = false;\n}\n\nconst pool = new Pool({ connectionString });\n\nexport const db = drizzle(pool, { schema });\n"],"names":[],"mappings":";;;AAAA;AAEA;AACA;AACA;AAEA;AAAA;;;;;;AAEA,MAAM,mBACJ,6EAAmE,QAAQ,GAAG,CAAC,kBAAkB;AAEnG,uCAA2C;;AAG3C,OAAO;IACL,sJAAA,CAAA,aAAU,CAAC,OAAO,GAAG,CAAC,OAAS,GAAG,KAAK,QAAQ,CAAC;IAChD,sJAAA,CAAA,aAAU,CAAC,kBAAkB,GAAG;IAChC,sJAAA,CAAA,aAAU,CAAC,WAAW,GAAG;IACzB,sJAAA,CAAA,aAAU,CAAC,eAAe,GAAG;AAC/B;AAEA,MAAM,OAAO,IAAI,sJAAA,CAAA,OAAI,CAAC;IAAE;AAAiB;AAElC,MAAM,KAAK,CAAA,GAAA,8JAAA,CAAA,UAAO,AAAD,EAAE,MAAM;IAAE,QAAA;AAAO","debugId":null}},
    {"offset": {"line": 312, "column": 0}, "map": {"version":3,"sources":["file:///Users/harryyang/hw-6-auth-and-deploy-harry-yangmath/actions/todos.ts"],"sourcesContent":["\"use server\"\n\nimport { eq } from \"drizzle-orm\"\nimport { headers } from \"next/headers\"\nimport { revalidatePath } from \"next/cache\"\n\nimport { auth } from \"@/lib/auth\"\nimport { db } from \"@/database/db\"\nimport { todos } from \"@/database/schema\"\n\nexport async function createTodo(/* */) {\n    /* YOUR CODE HERE */\n}\n\nexport async function toggleTodo(/* */) {\n    /* YOUR CODE HERE */\n}\n\nexport async function deleteTodo(formData: FormData) {\n    /* YOUR AUTHORIZATION CHECK HERE */\n    const id = formData.get(\"id\") as string;\n    await db.delete(todos)\n        .where(eq(todos.id, id));\n\n    revalidatePath(\"/admin\");\n}\n"],"names":[],"mappings":";;;;;;;AAEA;AAEA;AAGA;AACA;AAAA;;;;;;;;AAEO,eAAe;AAClB,kBAAkB,GACtB;AAEO,eAAe;AAClB,kBAAkB,GACtB;AAEO,eAAe,WAAW,QAAkB;IAC/C,iCAAiC,GACjC,MAAM,KAAK,SAAS,GAAG,CAAC;IACxB,MAAM,8GAAA,CAAA,KAAE,CAAC,MAAM,CAAC,2HAAA,CAAA,QAAK,EAChB,KAAK,CAAC,CAAA,GAAA,kKAAA,CAAA,KAAE,AAAD,EAAE,2HAAA,CAAA,QAAK,CAAC,EAAE,EAAE;IAExB,CAAA,GAAA,6HAAA,CAAA,iBAAc,AAAD,EAAE;AACnB;;;IAfsB;IAIA;IAIA;;AARA,+OAAA;AAIA,+OAAA;AAIA,+OAAA","debugId":null}},
    {"offset": {"line": 355, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 412, "column": 0}, "map": {"version":3,"sources":["file:///Users/harryyang/hw-6-auth-and-deploy-harry-yangmath/app/admin/page.tsx"],"sourcesContent":["import { desc } from \"drizzle-orm\"\n\nimport { db } from \"@/database/db\"\nimport { todos } from \"@/database/schema\"\n\nimport { Button } from \"@/components/ui/button\"\nimport { deleteTodo } from \"@/actions/todos\"\n\nexport const dynamic = 'force-dynamic'\n\nexport default async function AdminPage() {\n    \n    /* YOUR AUTHORIZATION CHECK HERE */\n\n    const allTodos = await db.query.todos.findMany({\n        with: {\n            user: {\n                columns: {\n                    name: true,\n                }\n            }\n        },\n        orderBy: [desc(todos.createdAt)]\n    });\n\n    return (\n        <main className=\"py-8 px-4\">\n            <section className=\"container mx-auto\">\n                <h1 className=\"text-2xl font-bold mb-6\">Admin Dashboard</h1>\n\n                <div className=\"border rounded-md overflow-hidden\">\n                    <table className=\"w-full\">\n                        <thead className=\"bg-muted\">\n                            <tr>\n                                <th className=\"py-2 px-4 text-left\">User</th>\n                                <th className=\"py-2 px-4 text-left\">Todo</th>\n                                <th className=\"py-2 px-4 text-center\">Actions</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            {allTodos.length === 0 && (\n                                <tr>\n                                    <td colSpan={3} className=\"py-2 px-4 text-center\">No todos found</td>\n                                </tr>\n                            )}\n                            {allTodos.map((todo) => (\n                                <tr key={todo.id} className=\"border-t\">\n                                    <td className=\"py-2 px-4\">{todo.user.name}</td>\n                                    <td className=\"py-2 px-4\">{todo.title}</td>\n                                    <td className=\"py-2 px-4 text-center\">\n                                        <form action={deleteTodo}>\n                                            <input type=\"hidden\" name=\"id\" value={todo.id} />\n                                            <Button\n                                                variant=\"destructive\"\n                                                size=\"sm\"\n                                                type=\"submit\"\n                                            >\n                                                Delete\n                                            </Button>\n                                        </form>\n                                    </td>\n                                </tr>\n                            ))}\n                        </tbody>\n                    </table>\n                </div>\n            </section>\n        </main>\n    )\n} \n"],"names":[],"mappings":";;;;;AAAA;AAEA;AACA;AAAA;AAEA;AACA;;;;;;;AAEO,MAAM,UAAU;AAER,eAAe;IAE1B,iCAAiC,GAEjC,MAAM,WAAW,MAAM,8GAAA,CAAA,KAAE,CAAC,KAAK,CAAC,KAAK,CAAC,QAAQ,CAAC;QAC3C,MAAM;YACF,MAAM;gBACF,SAAS;oBACL,MAAM;gBACV;YACJ;QACJ;QACA,SAAS;YAAC,CAAA,GAAA,8JAAA,CAAA,OAAI,AAAD,EAAE,2HAAA,CAAA,QAAK,CAAC,SAAS;SAAE;IACpC;IAEA,qBACI,8OAAC;QAAK,WAAU;kBACZ,cAAA,8OAAC;YAAQ,WAAU;;8BACf,8OAAC;oBAAG,WAAU;8BAA0B;;;;;;8BAExC,8OAAC;oBAAI,WAAU;8BACX,cAAA,8OAAC;wBAAM,WAAU;;0CACb,8OAAC;gCAAM,WAAU;0CACb,cAAA,8OAAC;;sDACG,8OAAC;4CAAG,WAAU;sDAAsB;;;;;;sDACpC,8OAAC;4CAAG,WAAU;sDAAsB;;;;;;sDACpC,8OAAC;4CAAG,WAAU;sDAAwB;;;;;;;;;;;;;;;;;0CAG9C,8OAAC;;oCACI,SAAS,MAAM,KAAK,mBACjB,8OAAC;kDACG,cAAA,8OAAC;4CAAG,SAAS;4CAAG,WAAU;sDAAwB;;;;;;;;;;;oCAGzD,SAAS,GAAG,CAAC,CAAC,qBACX,8OAAC;4CAAiB,WAAU;;8DACxB,8OAAC;oDAAG,WAAU;8DAAa,KAAK,IAAI,CAAC,IAAI;;;;;;8DACzC,8OAAC;oDAAG,WAAU;8DAAa,KAAK,KAAK;;;;;;8DACrC,8OAAC;oDAAG,WAAU;8DACV,cAAA,8OAAC;wDAAK,QAAQ,gHAAA,CAAA,aAAU;;0EACpB,8OAAC;gEAAM,MAAK;gEAAS,MAAK;gEAAK,OAAO,KAAK,EAAE;;;;;;0EAC7C,8OAAC,2HAAA,CAAA,SAAM;gEACH,SAAQ;gEACR,MAAK;gEACL,MAAK;0EACR;;;;;;;;;;;;;;;;;;2CAVJ,KAAK,EAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuBhD","debugId":null}}]
}